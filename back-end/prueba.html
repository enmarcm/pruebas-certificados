<!DOCTYPE html>
<html>
  <body>
    <h2>Subir archivos</h2>

    <form id="uploadForm">
      Selecciona los archivos a subir:
      <input type="file" id="files" name="files" multiple /><br /><br />
      Ingresa la clave privada:
      <input type="text" id="privateKey" name="privateKey" /><br /><br />
      <input type="submit" value="Subir archivos" name="submit" />
    </form>

    <script>
      document
        .getElementById("uploadForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const files = document.getElementById("files").files;
          const privateKey = document.getElementById("privateKey").value;

          const formData = new FormData();
          for (let i = 0; i < files.length; i++) {
            formData.append("files", files[i]);
          }
          formData.append("privateKey", privateKey);

          const response = await fetch("http://localhost:7878/decifrateFile", {
            method: "POST",
            body: formData,
          });

          const result = await response.text();
          console.log(result);
        });
    </script>
  </body>
</html>
